---
import Welcome from "@/components/Welcome.astro";
import Leistungen from "@/components/Leistungen.astro";
import Cite from "@/components/Cite.astro";
import Usps from "@/components/Usps.astro";
import Projects from "@/components/Projects.astro";
import Categories from "@/components/Categories.astro";
import ContactForm from "@/components/ContactForm.astro";
import Layout from "@/layouts/Layout.astro";
import type { AstroLocals } from "@/types";
import { string } from "astro:schema";

const { locals } = Astro as unknown as { locals: AstroLocals };

type Language = "de" | "en"; // ✅ exakt erlaubt

const pageLanguage = (locals.language ?? "de") as Language;
type MetaData = {
  pageTitle: {
    de: string;
    en: string;
  };
  pageDescription: {
    de: string;
    en: string;
  };
};
const metaData: MetaData = {
  pageTitle: {
    de: "Textil- & Bekleidungslösungen seit 1957 | Feuchter GmbH",
    en: "Textile & Apparel Solutions Since 1957 | Feuchter GmbH",
  },
  pageDescription: {
    de: "Hochwertige Textil- und Bekleidungslösungen seit 1957. Produktion für Industrie und Handel. Jetzt Kontakt aufnehmen – Feuchter GmbH.",
    en: "High-quality textile and apparel solutions since 1957. Serving industry and retail. Learn more – Feuchter GmbH.",
  },
};
let heading = "Ihre Vision ist nur noch einen Klick entfernt";
let subtitle = "Wir freuen uns, von Ihnen zu hören";
let introText = `
Wir unterstützen unsere Kunden von Anfang an bei ihren Projekten – von der Konzeption und Entwicklung über die Produktion bis hin zur Logistik. Mit unserer Expertise sorgen wir für maßgeschneiderte Lösungen, die effizient, zuverlässig und nachhaltig sind.`;
if (pageLanguage == "en") {
  heading = "Your Vision is just a click away";
  subtitle = "We are looking forward to hear from you";
  introText = `
We support our customers from the very beginning of their projects – from conception and development to production and logistics. With our expertise, we ensure tailored solutions that are efficient, reliable, and sustainable.`;
}
---

<Layout
  pageTitle={metaData.pageTitle[pageLanguage]}
  pageDescription={metaData.pageDescription[pageLanguage]}
>
  <Welcome language={pageLanguage} />
  <Leistungen language={pageLanguage} />
  <Categories language={pageLanguage} />
  <Cite language={pageLanguage} />
  <Usps language={pageLanguage} />
  <Projects language={pageLanguage} />
  <ContactForm heading={heading} subtitle={subtitle} language={pageLanguage} />
</Layout>
